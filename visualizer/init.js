define("src/util/util",[],function(){function makejPathFunction(jpath){if(!jpath)return noop;for(var jpaths2=jpath.replace(regJpath,""),splitted=jpaths2.split("."),l=splitted.length-1,ifArray=[],ifString,ifElement="el",i=0;l>i;i++)ifElement+='["'+splitted[i].replace(regQuote,'\\"')+'"]',ifArray.push(ifElement+" != undefined");ifString=ifArray.join(" && "),ifString||(ifString="true");var functionEvaled=noop;return eval("functionEvaled = function( el ) { if (el && "+ifString+") return "+ifElement+'["'+splitted[l].replace(regQuote,'\\"')+'"]; };'),functionEvaled}function getCSS(a,b){if(a=a.toLowerCase(),document.styleSheets){for(var c,d,e,f=0;f<document.styleSheets.length;f++){c=document.styleSheets[f],d=0,e=!1;do if(e=c.cssRules?c.cssRules[d]:c.rules[d],e&&e.selectorText){if(e.selectorText.toLowerCase()==a)return b?(c.cssRules?c.deleteRule(d):c.removeRule(d),!0):e;d++}else d++;while(e)}return!1}}var uniqueid=0,months=["January","February","March","April","Mai","June","July","August","September","October","November","December"],days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],noop=function(){},regQuote=/"/g,regJpath=/^element\./;return{getCurrentLang:function(){return"en"},maskIframes:function(){$("iframe").each(function(){var a=$(this),b=a.position(),c=a.width(),d=a.height();a.before($("<div />").css({position:"absolute",width:c,height:d,top:b.top,left:b.left,background:"white",opacity:.5}).addClass("iframemask"))})},unmaskIframes:function(){$(".iframemask").remove()},getNextUniqueId:function(a){return a?"id_"+Date.now()+Math.round(1e5*Math.random()):"uniqid_"+ ++uniqueid},formatSize:function(a){for(var b=0;a>1024;)a/=1024,b++;var c=["o","Ko","Mo","Go","To"];return Math.round(10*a)/10+" "+c[b]},pad:function(a){return 10>a?"0"+a:a},getMonth:function(a){return months[a]},getDay:function(a){return days[a]},loadCss:function(a){if(this.loadedCss=this.loadedCss||{},!this.loadedCss[a]){this.loadedCss[a]=!0;var b=document.createElement("link");b.type="text/css",b.rel="stylesheet",b.href=require.toUrl(a);try{document.getElementsByTagName("head")[0].appendChild(b)}catch(c){}}},getDistinctColors:function(a){for(var b=[],c=0,d=0;360>d;d+=360/a){c++;var e=this.hsl2rgb(d,100,30+c%4*15);b.push([Math.round(255*e.r),Math.round(255*e.g),Math.round(255*e.b)])}return b},getNextColorRGB:function(a,b){return this.getDistinctColors(b)[a]},hsl2rgb:function(a,b,c){var d,e,f,g,h,i;return b/=100,c/=100,0===b?g=h=i=255*c:(e=.5>=c?c*(b+1):c+b-c*b,d=2*c-e,f=a/360,g=this.hueToRgb(d,e,f+1/3),h=this.hueToRgb(d,e,f),i=this.hueToRgb(d,e,f-1/3)),{r:g,g:h,b:i}},hueToRgb:function(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+(b-a)*(2/3-c)*6:a},hexToRgb:function(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)]:[0,0,0]},rgbToHex:function(a,b,c){return"#"+((1<<24)+(a<<16)+(b<<8)+c).toString(16).slice(1)},getColor:function(a){if(Array.isArray(a))switch(a.length){case 3:return"rgb("+a.join(",")+")";case 4:return"rgba("+a.join(",")+")"}else if("object"==typeof a)return"rgb("+Math.round(255*a.r)+", "+Math.round(255*a.g)+", "+Math.round(255*a.b)+")";return a},makejPathFunction:makejPathFunction,addjPathFunction:function(a,b){a[b]=makejPathFunction(b)},getWebsafeFonts:function(){return[{title:"Arial",key:"Arial"},{title:"Arial Black",key:"'Arial Black'"},{title:"Comic Sans MS",key:"'Comic Sans MS'"},{title:"Courier",key:"Courier"},{title:"Courier new",key:"'Courier New'"},{title:"Georgia",key:"Georgia"},{title:"Helvetica",key:"Helvetica"},{title:"Impact",key:"Impact"},{title:"Palatino",key:"Palatino"},{title:"Times new roman",key:"'Times New Roman'"},{title:"Trebuchet MS",key:"'Trebuchet MS'"},{title:"Verdana",key:"Verdana"}]},getCSS:getCSS,removeCSS:function(a){return getCSS(a,!0)},addCSS:function(a){if(document.styleSheets){var b;return(b=getCSS(a))?b:(document.styleSheets[0].addRule?document.styleSheets[0].addRule(a,null,0):document.styleSheets[0].insertRule(a+" { }",0),getCSS(a))}},formatMoney:function(a,b,c,d){b=isNaN(b=Math.abs(b))?2:b,d=void 0==d?".":d,c=void 0==c?",":c;var e=0>a?"-":"",f=parseInt(a=Math.abs(+a||0).toFixed(b))+"",g=f.length;return g=g>3?g%3:0,e+(g?f.substr(0,g)+c:"")+f.substr(g).replace(/(\d{3})(?=\d)/g,"$1"+c)+(b?d+Math.abs(a-f).toFixed(b).slice(2):"")},safeAccess:function(){for(var a=arguments[0],b=1;b<arguments.length;b++)if(!(a=a[arguments[b]]))return!1;return a}}}),define("src/util/debug",[],function(){function a(a){f.push(a)}function b(a,b){return b?"ms"===b?a+"ms":"s"===b?a/1e3+"s":void 0:a}function c(){this._start=Date.now(),this._step=this._start}var d=-1,e=window.console,f=[],g={setDebugLevel:function(a){d=a},error:function(b,c){d>=0&&(c instanceof Error&&c.stack?arguments[1]="\n"+c.stack:f.push.call(arguments,"\n"+Error().stack),e.error.apply(e,arguments)),d>-1&&a("ERROR : "+b)},warn:function(b){d>=1&&e.warn.apply(e,arguments),d>-1&&a("WARN  : "+b)},info:function(b){d>=2&&e.info.apply(e,arguments),d>-1&&a("INFO  : "+b)},debug:function(b){d>=3&&e.debug.apply(e,arguments),d>-1&&a("DEBUG : "+b)},trace:function(b){d>=4&&e.log.apply(e,arguments),d>-1&&a("TRACE : "+b)},dump:function(){e.log(f.join("\n")),f=[]},timer:function(){return new c}};return c.prototype={time:function(a){return b(Date.now()-this._start,a)},step:function(a){var c=Date.now(),d=c-this._step;return this._step=c,b(d,a)}},g}),define("src/main/datas",["src/util/util","src/util/debug"],function(a,b){function c(a){if(a){for(var b in a)a.hasOwnProperty(b)&&(a[b]=c.check(a[b]));return c.check(a),a}}function d(a){var b=typeof a;if("number"===b||"string"===b||"boolean"===b)return a;if("undefined"!==b&&"function"!==b){var e,f,g;if(k(a))return l(a);if(a instanceof Array)for(g=a.length,e=new Array(g),a instanceof h&&(e=h(e)),f=0;g>f;f++)e[f]=d(a[f]);else{var i=Object.keys(a);for(g=i.length,e=a instanceof c?new c:{},f=0;g>f;f++)e[i[f]]=d(a[i[f]])}return e}}function e(a){String.call(this,a),this.s_=a}function f(a){Number.call(this,a),this.s_=a}function g(a){Boolean.call(this,a),this.s_=a}function h(a,b,d){var e=[];if(a){if(!(a instanceof Array))throw"DataArray can only be constructed from arrays";for(var f=0,g=a.length;g>f;f++)e[f]=b?c.check(a[f],b,d):a[f]}return e.__proto__=h.prototype,e}function i(a,b){for(var c in b){var d=b[c];"object"==typeof d?d instanceof Array?a[c]=d:null!==d&&(a[c]||(a[c]={}),i(a[c],d)):a[c]=d}}function j(a){return a instanceof c||a instanceof h||k(a)}function k(a){return a instanceof e||a instanceof f||a instanceof g}function l(a){var b;switch(k(a)?(b=a.getType(),a=a.get()):b=typeof a,b){case"string":return new e(a);case"number":return new f(a);case"boolean":return new g(a)}}c.check=function(a,b){if(j(a))return a;if(a instanceof Array)return a.__proto__=h.prototype,a;if(null===a)return null;var d=typeof a;return"object"===d?(a.__proto__=c.prototype,a):b?l(a):a},c.recursiveTransform=function(a,b){a=c.check(a,b);var d,e;if(a instanceof Array)for(d=0,e=a.length;e>d;d++)a[d]=c.check(a[d],b),c.recursiveTransform(a[d],b);else if(a instanceof Object)for(d in a)a[d]=c.check(a[d],b),c.recursiveTransform(a[d],b);return a};for(var m={value:function(){return d(this)}},n=["charAt","charCodeAt","concat","fromCharCode","indexOf","lastIndexOf","localCompare","match","replace","search","slice","split","substr","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim"],o=0,p=n.length;p>o;o++)!function(a){e.prototype[n[a]]=function(){return String.prototype[n[a]].apply(this.s_,arguments)}}(o);e.prototype.getType=function(){return"string"},e.prototype.nativeConstructor=String,f.prototype.getType=function(){return"number"},f.prototype.nativeConstructor=Number,g.prototype.getType=function(){return"boolean"},g.prototype.nativeConstructor=Boolean,window.DataString=e,window.DataNumber=f,window.DataBoolean=g,h.prototype=Object.create(Array.prototype),Object.defineProperty(h.prototype,"constructor",h),window.DataObject=c,window.DataArray=h;var q={value:function(){var a={};for(var b in this)a[b]=j(this[b])?this[b].resurrect():this[b];return a}},r={value:function(){for(var a=[],b=0,c=this.length;c>b;b++)a[b]=j(this[b])?this[b].resurrect():this[b];return a}},s={value:function(a,b,d){if("string"==typeof a||"number"==typeof a){if(b){var e=this;return new Promise(function(b){e.get(!0).then(function(e){return"object"!=typeof e||null===e?b(e):"undefined"!=typeof e[a]?e[a]&&e[a].fetch?e[a].fetch(!0).then(b):(e[a]=c.check(e[a],!0),b(e[a])):d?(e[a]=new d,b(e[a])):b()})})}var f=this.get();return"object"!=typeof f||null===f?f:("undefined"!=typeof f[a]&&(f[a]=c.check(f[a],1)),f[a])}return a===!0?this.hasOwnProperty("type")&&this.hasOwnProperty("value")?Promise.resolve(this.value):this.hasOwnProperty("type")&&this.hasOwnProperty("url")?this.fetch(!0):Promise.resolve(this):this.hasOwnProperty("value")&&this.hasOwnProperty("type")?this.value:this}},t={value:function(a,b){var d=c.check(b,!0);if(!d)return void(this[a]=d);var e=d.getType();this[a]=c.check(this[a]);var f=void 0!==this[a]&&this[a].getType?this[a].getType():void 0;return f!==e?(this[a]=d,this[a]):"string"===e||"number"===e||"boolean"===e?(this[a].setValue(b),this[a]):(d!==this[a]&&(this[a]=d),this[a])}},u={value:function(a){if("string"==typeof a&&(a=a.split("."),a.shift()),!a||0===a.length)return Promise.resolve(this);a=a.slice();var b=a.shift(),d=this;return new Promise(function(e){d.get(b,!0).then(function(b){b=c.check(b,!0),b&&0!==a.length?b.getChild(a).then(e):e(b)})})}},v={value:function(a,b){if(a&&a.split&&(a=a.split("."),a.shift()),!a||0===a.length)return Promise.resolve(this);a=a.slice();var d=a.shift(),e=this,f=0==a.length?b:"number"==typeof d?h:c;return this.get(d,!0,f).then(function(f){return e.get()[d]=c.check(f),f&&f.linkToParent&&f.linkToParent(e,d),f&&0!==a.length?f.trace(a,b):f})}},w={value:function(a,b){if(a&&a.split&&(a=a.split("."),a.shift()),!a||0===a.length)return this;a=a.slice();var d=a.shift(),e=this,f=0==a.length?b:"number"==typeof d?h:c,g=this.get(d,!1,f);return e.get()[d]=c.check(g),g&&g.linkToParent&&g.linkToParent(e,d),g&&0!==a.length?g.traceSync(a,b):g}},x={value:function(a,b){if(Array.isArray(a)||(a=[a]),a){a=a.slice();var c=a.shift(),d=this.get(c);if(null!==d)return 0===a.length?d:void 0===d?void 0:d.getChildSync(a,b)}}},y={value:function(a,b){this.__parent||(a[b]=this,Object.defineProperty(this,"__parent",{value:a,writable:!1,configurable:!1,enumerable:!1}),Object.defineProperty(this,"__name",{value:b,writable:!1,configurable:!1,enumerable:!1}))}},z={value:function(a,b,d,e){var f=this,g=!1;void 0===d&&(g=!0);Array.prototype.slice.call(arguments,2);a&&a.split&&(a=a.split("."),a.shift()),a=a.slice();var i=a.length,j=a.shift();if(1===i){var k=f.set(j,b);return void(k&&(console.log("Trigger it !!"),k.triggerChange()))}var l=0===a.length?e:"number"==typeof j?h:c,m=j;arguments[0]=a;var n=arguments;return this.get(j,!0,l).then(function(a){f.set(m,a),a.linkToParent(f,m),a.setChild.apply(a,n)})}},A={value:function(a,b){if(this._dataChange)for(var c in this._dataChange)this._dataChange[c].apply(this,b);a||this.__parent&&this.__parent.triggerChange.apply(this.__parent,b)}},B={value:function(b){this._dataChange||Object.defineProperty(this,"_dataChange",{value:{},enumerable:!1,writable:!0,configurable:!0});var c=a.getNextUniqueId(!0);return this._dataChange[c]=b,b.id=c,c}},C={value:function(a){return this._dataChange?(a.id&&(a=a.id),void(this._dataChange||delete this._dataChange[a])):(b.info("Could not unbind event. No listener for this object"),!1)}},D={value:function(){var a=typeof this;return"object"!==a?a:this instanceof Array?"array":this.hasOwnProperty("type")&&(this.hasOwnProperty("value")||this.hasOwnProperty("url"))?this.type:a}},E={value:function(a){if(this.value||!this.url)return Promise.resolve(this);var b=this;return new Promise(function(d,e){require(["src/util/urldata"],function(f){var g;a&&(g={Accept:"application/json"}),f.get(b.url,!1,b.timeout,g).then(function(a){a=c.check(a,!0),Object.defineProperty(b,"value",{enumerable:b._keep||!1,writable:!0,configurable:!1,value:a}),d(b)},e)})})}},F={value:function(a,b,c){"object"!=typeof a||a instanceof Array||(i(this,a),this.triggerChange(c,[b]))}},G={value:function(a,c,d){return this.triggerChange(d,[c]),b.warn("mergeWith method not yet implemented for DataArray")}},H={value:function(a){this.hasOwnProperty("type")&&this.hasOwnProperty("value")?this.value instanceof e||this.value instanceof f||this.value instanceof g?this.value.setValue(a):this.value=a:b.warn("Cannot set value of untyped DataObject")}},I={set:t,get:s,setChild:z,getChild:u,getChildSync:x,trace:v,duplicate:m,traceSync:w,onChange:B,unbindChange:C,triggerChange:A,linkToParent:y,getType:D,setValue:H};Object.defineProperties(c.prototype,I),Object.defineProperties(h.prototype,I),Object.defineProperty(c.prototype,"fetch",E),Object.defineProperty(c.prototype,"resurrect",q),Object.defineProperty(c.prototype,"mergeWith",F),Object.defineProperty(h.prototype,"resurrect",r),Object.defineProperty(h.prototype,"mergeWith",G);var J={value:function(){return this.s_}},K={value:function(){return Promise.resolve(this)}},L={value:function(a){this.s_=this.nativeConstructor(a)}},M={value:function(){return String(this.s_)}},N={trace:v,onChange:B,unbindChange:C,triggerChange:A,linkToParent:y,toJSON:J,get:J,resurrect:J,getChild:K,valueOf:J,setValue:L,toString:M};Object.defineProperties(e.prototype,N),Object.defineProperties(f.prototype,N),Object.defineProperties(g.prototype,N)}),requirejs.config({waitSeconds:0,paths:{ace:"components/ace/lib/ace",d3:"components/d3/d3.min",fancytree:"components/fancytree/dist/jquery.fancytree-all",jqgrid:"components/jqgrid_edit/js/jquery.jqGrid",jquery:"components/jquery/jquery.min",jqueryui:"components/jquery-ui/ui/minified/jquery-ui.min",ckeditor:"components/ckeditor/ckeditor",threejs:"components/three.js/build/three.min",forms:"lib/forms",plot:"lib/plot/plot",ChemDoodle:"lib/chemdoodle/ChemDoodleWeb-unpacked",pouchdb:"components/pouchdb/dist/pouchdb-nightly.min",uri:"components/uri.js/src",underscore:"components/underscore/underscore",lodash:"components/lodash/dist/lodash.min",leaflet:"components/leaflet/dist/leaflet",modernizr:"components/modernizr/modernizr",bowser:"components/bowser/bowser.min","jquery-cookie":"components/jquery-cookie/jquery.cookie"},shim:{d3:{exports:"d3"},threejs:{exports:"THREE"},"components/x2js/xml2json.min":{exports:"X2JS"},leaflet:{exports:"L",init:function(){return this.L.noConflict()}},"components/jit/Jit/jit":{exports:"$jit"},ckeditor:{exports:"CKEDITOR"},modernizr:{exports:"Modernizr"},"jquery-cookie":"jquery","components/three.js/examples/js/controls/TrackballControls":["threejs"],jqgrid:["jquery","components/jqgrid_edit/js/i18n/grid.locale-en"],"libs/jsmol/js/JSmolApplet":["libs/jsmol/JSmol.min.nojq"],"lib/flot/jquery.flot.pie":["jquery","lib/flot/jquery.flot"],jqueryui:["jquery"],ChemDoodle:["lib/chemdoodle/ChemDoodleWeb-libs"],"components/farbtastic/src/farbtastic":["components/jquery/jquery-migrate.min"],"lib/pixastic/pixastic":["lib/pixastic/pixastic/pixastic.core"],"lib/biojs-1.0/src/main/javascript/Biojs.FeatureViewer.js":["lib/biojs-1.0/src/main/javascript/Biojs.js"],"lib/biojs-1.0/src/main/javascript/Biojs.DasProteinFeatureViewer.js":["lib/biojs-1.0/src/main/javascript/Biojs.js","lib/biojs-1.0/src/main/javascript/Biojs.FeatureViewer.js"]}}),require(["jquery","src/main/datas"],function(a){a(document).ready(function(){require(["src/main/entrypoint","uri/URI.fragmentQuery"],function(a,b){var c=new b(window.location.href),d=c.search().length>0?"search":"?"===c.fragment()[0]?"fragment":"search",e=new b(c[d]()).query(!0);a.init(e,d.replace(d[0],d[0].toUpperCase()))})})}),define("init",function(){});